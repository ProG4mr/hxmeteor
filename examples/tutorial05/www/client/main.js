// Generated by Haxe 3.4.0
(function () { "use strict";
var Client = function() { };
Client.main = function() {
	model_Tasks.init();
	ui_Task.init();
	Template.body.helpers({ tasks : function() {
		return model_Tasks.collection.find({ },{ sort : { createdAt : -1}});
	}});
	Template.body.events({ 'submit .new-task' : function(event) {
		event.preventDefault();
		var target = event.target;
		model_Tasks.collection.insert({ text : target.text.value, createdAt : new Date()});
		target.text.value = "";
	}});
};
var model_Tasks = function() { };
model_Tasks.init = function() {
	model_Tasks.collection = new Mongo.Collection("Tasks");
};
var ui_Task = function() { };
ui_Task.init = function() {
	Template["task"].events({ 'click .toggle-checked' : function(event) {
		console.log(event.target.checked);
		model_Tasks.collection.update(this._id,{ '$set' : { checked : event.target.checked}});
	}, 'click .delete' : function() {
		model_Tasks.collection.remove(this._id);
	}});
};
Client.main();
})();
